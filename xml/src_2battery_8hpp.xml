<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.8" xml:lang="en-US">
  <compounddef id="src_2battery_8hpp" kind="file" language="C++">
    <compoundname>battery.hpp</compoundname>
    <includes local="no">M5Stack.h</includes>
    <includedby refid="battery_8cpp" local="no">archive/bgeigie_firmware_pio/src/battery.cpp</includedby>
    <includedby refid="src_2fsm__context_8hpp" local="no">archive/bgeigie_firmware_pio/src/fsm_context.hpp</includedby>
    <incdepgraph>
      <node id="1">
        <label>archive/bgeigie_firmware_pio/src/battery.hpp</label>
        <link refid="src_2battery_8hpp"/>
        <childnode refid="2" relation="include">
        </childnode>
      </node>
      <node id="2">
        <label>M5Stack.h</label>
      </node>
    </incdepgraph>
    <invincdepgraph>
      <node id="2">
        <label>archive/bgeigie_firmware_pio/src/battery.cpp</label>
        <link refid="battery_8cpp"/>
      </node>
      <node id="1">
        <label>archive/bgeigie_firmware_pio/src/battery.hpp</label>
        <link refid="src_2battery_8hpp"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="3" relation="include">
        </childnode>
      </node>
      <node id="4">
        <label>archive/bgeigie_firmware_pio/src/fsm_context.cpp</label>
        <link refid="fsm__context_8cpp"/>
      </node>
      <node id="3">
        <label>archive/bgeigie_firmware_pio/src/fsm_context.hpp</label>
        <link refid="src_2fsm__context_8hpp"/>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
      </node>
      <node id="5">
        <label>archive/bgeigie_firmware_pio/src/fsm_state_base.hpp</label>
        <link refid="src_2fsm__state__base_8hpp"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="6" relation="include">
        </childnode>
      </node>
      <node id="7">
        <label>archive/bgeigie_firmware_pio/src/fsm_state_concrete.cpp</label>
        <link refid="fsm__state__concrete_8cpp"/>
      </node>
      <node id="6">
        <label>archive/bgeigie_firmware_pio/src/fsm_state_concrete.hpp</label>
        <link refid="src_2fsm__state__concrete_8hpp"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="7" relation="include">
        </childnode>
      </node>
      <node id="8">
        <label>archive/bgeigie_firmware_pio/src/main.cpp</label>
        <link refid="archive_2bgeigie__firmware__pio_2src_2main_8cpp"/>
      </node>
    </invincdepgraph>
    <innerclass refid="class_battery_monitor_i_p5306" prot="public">BatteryMonitorIP5306</innerclass>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="preprocessor">#ifndef<sp/>__BATTERY_HPP__</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>__BATTERY_HPP__</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="5"><highlight class="comment">**<sp/>IP5306<sp/>Power<sp/>Module</highlight></codeline>
<codeline lineno="6"><highlight class="comment">*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>M5<sp/>Defaults</highlight></codeline>
<codeline lineno="9"><highlight class="comment">KeyOff:<sp/>Enabled</highlight></codeline>
<codeline lineno="10"><highlight class="comment">BoostOutput:<sp/>Disabled</highlight></codeline>
<codeline lineno="11"><highlight class="comment">PowerOnLoad:<sp/>Enabled</highlight></codeline>
<codeline lineno="12"><highlight class="comment">Charger:<sp/>Enabled</highlight></codeline>
<codeline lineno="13"><highlight class="comment">Boost:<sp/>Enabled</highlight></codeline>
<codeline lineno="14"><highlight class="comment">LowBatShutdown:<sp/>Enabled</highlight></codeline>
<codeline lineno="15"><highlight class="comment">ShortPressBoostSwitch:<sp/>Disabled</highlight></codeline>
<codeline lineno="16"><highlight class="comment">FlashlightClicks:<sp/>Double<sp/>Press</highlight></codeline>
<codeline lineno="17"><highlight class="comment">BoostOffClicks:<sp/>Long<sp/>Press</highlight></codeline>
<codeline lineno="18"><highlight class="comment">BoostAfterVin:<sp/>Open</highlight></codeline>
<codeline lineno="19"><highlight class="comment">LongPressTime:<sp/>2s</highlight></codeline>
<codeline lineno="20"><highlight class="comment">ChargeUnderVoltageLoop:<sp/>4.55V</highlight></codeline>
<codeline lineno="21"><highlight class="comment">ChargeCCLoop:<sp/>Vin</highlight></codeline>
<codeline lineno="22"><highlight class="comment">VinCurrent:<sp/>2250mA</highlight></codeline>
<codeline lineno="23"><highlight class="comment">VoltagePressure:<sp/>28mV</highlight></codeline>
<codeline lineno="24"><highlight class="comment">ChargingFullStopVoltage:<sp/>4.17V</highlight></codeline>
<codeline lineno="25"><highlight class="comment">LightLoadShutdownTime:<sp/>32s</highlight></codeline>
<codeline lineno="26"><highlight class="comment">EndChargeCurrentDetection:<sp/>500mA</highlight></codeline>
<codeline lineno="27"><highlight class="comment">ChargeCutoffVoltage:<sp/>4.2V</highlight></codeline>
<codeline lineno="28"><highlight class="comment">*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;M5Stack.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="class_battery_monitor_i_p5306" kindref="compound">BatteryMonitorIP5306</ref><sp/>{</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>IP5306_I2C_ADDR<sp/>=<sp/>0x75;</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>IP5306_REG_SYS_0<sp/>=<sp/>0x00;</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>IP5306_REG_SYS_1<sp/>=<sp/>0x01;</highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>IP5306_REG_SYS_2<sp/>=<sp/>0x02;</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>IP5306_REG_CHG_0<sp/>=<sp/>0x20;</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>IP5306_REG_CHG_1<sp/>=<sp/>0x21;</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>IP5306_REG_CHG_2<sp/>=<sp/>0x22;</highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>IP5306_REG_CHG_3<sp/>=<sp/>0x23;</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>IP5306_REG_CHG_4<sp/>=<sp/>0x24;</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>IP5306_REG_READ_0<sp/>=<sp/>0x70;</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>IP5306_REG_READ_1<sp/>=<sp/>0x71;</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>IP5306_REG_READ_2<sp/>=<sp/>0x72;</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>IP5306_REG_READ_3<sp/>=<sp/>0x77;</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>IP5306_REG_READ_4<sp/>=<sp/>0x78;</highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/>uint8_t<sp/>get_bits(uint8_t<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">reg</ref>,<sp/>uint8_t<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">index</ref>,<sp/>uint8_t<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">bits</ref>);</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>set_bits(uint8_t<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">reg</ref>,<sp/>uint8_t<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">index</ref>,<sp/>uint8_t<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">bits</ref>,<sp/>uint8_t<sp/>value);</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>get_reg(uint8_t<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">reg</ref>);</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>set_reg(uint8_t<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">reg</ref>,<sp/>uint8_t<sp/>value);</highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="55" refid="class_battery_monitor_i_p5306_1a58b80285e63a797c3ce3bfa2dbd5bbad" refkind="member"><highlight class="normal"><sp/><sp/><ref refid="class_battery_monitor_i_p5306_1a58b80285e63a797c3ce3bfa2dbd5bbad" kindref="member">BatteryMonitorIP5306</ref>()<sp/>{}</highlight></codeline>
<codeline lineno="56" refid="class_battery_monitor_i_p5306_1a9ba36679ebdb7aa7981ec20997cf633e" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_battery_monitor_i_p5306_1a9ba36679ebdb7aa7981ec20997cf633e" kindref="member">print_stats</ref>();</highlight></codeline>
<codeline lineno="57" refid="class_battery_monitor_i_p5306_1a3a5d92d19046bffb068d349dd59b7927" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_battery_monitor_i_p5306_1a3a5d92d19046bffb068d349dd59b7927" kindref="member">print_settings</ref>();</highlight></codeline>
<codeline lineno="58" refid="class_battery_monitor_i_p5306_1ab5616a0155f8597f584077c2adb3e6fc" refkind="member"><highlight class="normal"><sp/><sp/>int8_t<sp/><ref refid="class_battery_monitor_i_p5306_1ab5616a0155f8597f584077c2adb3e6fc" kindref="member">get_level</ref>();</highlight></codeline>
<codeline lineno="59"><highlight class="normal"></highlight></codeline>
<codeline lineno="60" refid="class_battery_monitor_i_p5306_1a420e6c360cc165aea2b36a4b9741b000" refkind="member"><highlight class="normal"><sp/><sp/>uint8_t<sp/><ref refid="class_battery_monitor_i_p5306_1a420e6c360cc165aea2b36a4b9741b000" kindref="member">GetKeyOffEnabled</ref>()<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>get_bits(<ref refid="_raku__code_8cpp_1a9ba45af7468de51ba7f89fffa7fb5e61" kindref="member">IP5306_REG_SYS_0</ref>,<sp/>0,<sp/>1);<sp/>}</highlight></codeline>
<codeline lineno="61" refid="class_battery_monitor_i_p5306_1a33f6f9b67b30d941cb0673561e1fc929" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_battery_monitor_i_p5306_1a33f6f9b67b30d941cb0673561e1fc929" kindref="member">SetKeyOffEnabled</ref>(uint8_t<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>)<sp/>{</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/>set_bits(<ref refid="_raku__code_8cpp_1a9ba45af7468de51ba7f89fffa7fb5e61" kindref="member">IP5306_REG_SYS_0</ref>,<sp/>0,<sp/>1,<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>);</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/>}<sp/><sp/></highlight><highlight class="comment">//<sp/>0:dis,*1:en</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal"></highlight></codeline>
<codeline lineno="65" refid="class_battery_monitor_i_p5306_1ab52fd285234f666a5d82298df5ec925d" refkind="member"><highlight class="normal"><sp/><sp/>uint8_t<sp/><ref refid="class_battery_monitor_i_p5306_1ab52fd285234f666a5d82298df5ec925d" kindref="member">GetBoostOutputEnabled</ref>()<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>get_bits(<ref refid="_raku__code_8cpp_1a9ba45af7468de51ba7f89fffa7fb5e61" kindref="member">IP5306_REG_SYS_0</ref>,<sp/>1,<sp/>1);<sp/>}</highlight></codeline>
<codeline lineno="66" refid="class_battery_monitor_i_p5306_1a079fb5956a9d50ad73006de2e920b7eb" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_battery_monitor_i_p5306_1a079fb5956a9d50ad73006de2e920b7eb" kindref="member">SetBoostOutputEnabled</ref>(uint8_t<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>)<sp/>{</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/>set_bits(<ref refid="_raku__code_8cpp_1a9ba45af7468de51ba7f89fffa7fb5e61" kindref="member">IP5306_REG_SYS_0</ref>,<sp/>1,<sp/>1,<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>);<sp/><sp/></highlight><highlight class="comment">//*0:dis,1:en</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="69"><highlight class="normal"></highlight></codeline>
<codeline lineno="70" refid="class_battery_monitor_i_p5306_1a218dbfbcc26a1dc0221525b7b5786f11" refkind="member"><highlight class="normal"><sp/><sp/>uint8_t<sp/><ref refid="class_battery_monitor_i_p5306_1a218dbfbcc26a1dc0221525b7b5786f11" kindref="member">GetPowerOnLoadEnabled</ref>()<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>get_bits(<ref refid="_raku__code_8cpp_1a9ba45af7468de51ba7f89fffa7fb5e61" kindref="member">IP5306_REG_SYS_0</ref>,<sp/>2,<sp/>1);<sp/>}</highlight></codeline>
<codeline lineno="71" refid="class_battery_monitor_i_p5306_1a43d3e4dd2716e5fcea8596e1e9a78e08" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_battery_monitor_i_p5306_1a43d3e4dd2716e5fcea8596e1e9a78e08" kindref="member">SetPowerOnLoadEnabled</ref>(uint8_t<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>)<sp/>{</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/>set_bits(<ref refid="_raku__code_8cpp_1a9ba45af7468de51ba7f89fffa7fb5e61" kindref="member">IP5306_REG_SYS_0</ref>,<sp/>2,<sp/>1,<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>);<sp/><sp/></highlight><highlight class="comment">//<sp/>0:dis,*1:en</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="74"><highlight class="normal"></highlight></codeline>
<codeline lineno="75" refid="class_battery_monitor_i_p5306_1a6c18cb94b4cad66e6537a296a94656ff" refkind="member"><highlight class="normal"><sp/><sp/>uint8_t<sp/><ref refid="class_battery_monitor_i_p5306_1a6c18cb94b4cad66e6537a296a94656ff" kindref="member">GetChargerEnabled</ref>()<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>get_bits(<ref refid="_raku__code_8cpp_1a9ba45af7468de51ba7f89fffa7fb5e61" kindref="member">IP5306_REG_SYS_0</ref>,<sp/>4,<sp/>1);<sp/>}</highlight></codeline>
<codeline lineno="76" refid="class_battery_monitor_i_p5306_1a3cd8d83e1efe69dc21ed096ff006a240" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_battery_monitor_i_p5306_1a3cd8d83e1efe69dc21ed096ff006a240" kindref="member">SetChargerEnabled</ref>(uint8_t<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>)<sp/>{</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/>set_bits(<ref refid="_raku__code_8cpp_1a9ba45af7468de51ba7f89fffa7fb5e61" kindref="member">IP5306_REG_SYS_0</ref>,<sp/>4,<sp/>1,<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>);</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/>}<sp/><sp/></highlight><highlight class="comment">//<sp/>0:dis,*1:en</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="79"><highlight class="normal"></highlight></codeline>
<codeline lineno="80" refid="class_battery_monitor_i_p5306_1a2c0682f3cde08d31099e0349a2f1276d" refkind="member"><highlight class="normal"><sp/><sp/>uint8_t<sp/><ref refid="class_battery_monitor_i_p5306_1a2c0682f3cde08d31099e0349a2f1276d" kindref="member">GetBoostEnabled</ref>()<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>get_bits(<ref refid="_raku__code_8cpp_1a9ba45af7468de51ba7f89fffa7fb5e61" kindref="member">IP5306_REG_SYS_0</ref>,<sp/>5,<sp/>1);<sp/>}</highlight></codeline>
<codeline lineno="81" refid="class_battery_monitor_i_p5306_1a4ef873ad6b79dea475c53d8295e6276b" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_battery_monitor_i_p5306_1a4ef873ad6b79dea475c53d8295e6276b" kindref="member">SetBoostEnabled</ref>(uint8_t<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>)<sp/>{</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/>set_bits(<ref refid="_raku__code_8cpp_1a9ba45af7468de51ba7f89fffa7fb5e61" kindref="member">IP5306_REG_SYS_0</ref>,<sp/>5,<sp/>1,<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>);<sp/><sp/></highlight><highlight class="comment">//<sp/>0:dis,*1:en</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="84"><highlight class="normal"></highlight></codeline>
<codeline lineno="85" refid="class_battery_monitor_i_p5306_1aab866ae063659ef9ac8fb3d233e2d4b0" refkind="member"><highlight class="normal"><sp/><sp/>uint8_t<sp/><ref refid="class_battery_monitor_i_p5306_1aab866ae063659ef9ac8fb3d233e2d4b0" kindref="member">GetLowBatShutdownEnable</ref>()<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>get_bits(<ref refid="_raku__code_8cpp_1a2d89a1896ab0f29a0aa0aee5eabf19d6" kindref="member">IP5306_REG_SYS_1</ref>,<sp/>0,<sp/>1);<sp/>}</highlight></codeline>
<codeline lineno="86" refid="class_battery_monitor_i_p5306_1aad5b08604e19a0e8d67d3828b096a60e" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_battery_monitor_i_p5306_1aad5b08604e19a0e8d67d3828b096a60e" kindref="member">SetLowBatShutdownEnable</ref>(uint8_t<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>)<sp/>{</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/>set_bits(<ref refid="_raku__code_8cpp_1a2d89a1896ab0f29a0aa0aee5eabf19d6" kindref="member">IP5306_REG_SYS_1</ref>,<sp/>0,<sp/>1,<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>);</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/>}<sp/><sp/></highlight><highlight class="comment">//<sp/>0:dis,*1:en</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="89"><highlight class="normal"></highlight></codeline>
<codeline lineno="90" refid="class_battery_monitor_i_p5306_1a6356c27e4d203947e4150381898476ea" refkind="member"><highlight class="normal"><sp/><sp/>uint8_t<sp/><ref refid="class_battery_monitor_i_p5306_1a6356c27e4d203947e4150381898476ea" kindref="member">GetBoostAfterVin</ref>()<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>get_bits(<ref refid="_raku__code_8cpp_1a2d89a1896ab0f29a0aa0aee5eabf19d6" kindref="member">IP5306_REG_SYS_1</ref>,<sp/>2,<sp/>1);<sp/>}</highlight></codeline>
<codeline lineno="91" refid="class_battery_monitor_i_p5306_1aeee24d6bf7aad853f8752ebc18598fc6" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_battery_monitor_i_p5306_1aeee24d6bf7aad853f8752ebc18598fc6" kindref="member">SetBoostAfterVin</ref>(uint8_t<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>)<sp/>{</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/>set_bits(<ref refid="_raku__code_8cpp_1a2d89a1896ab0f29a0aa0aee5eabf19d6" kindref="member">IP5306_REG_SYS_1</ref>,<sp/>2,<sp/>1,<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>);</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/>}<sp/><sp/></highlight><highlight class="comment">//<sp/>0:Closed,<sp/>*1:Open</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="94"><highlight class="normal"></highlight></codeline>
<codeline lineno="95" refid="class_battery_monitor_i_p5306_1abb40866ea15e89872fe0e6389624ffbe" refkind="member"><highlight class="normal"><sp/><sp/>uint8_t<sp/><ref refid="class_battery_monitor_i_p5306_1abb40866ea15e89872fe0e6389624ffbe" kindref="member">GetShortPressBoostSwitchEnable</ref>()<sp/>{</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>get_bits(<ref refid="_raku__code_8cpp_1a2d89a1896ab0f29a0aa0aee5eabf19d6" kindref="member">IP5306_REG_SYS_1</ref>,<sp/>5,<sp/>1);</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="98" refid="class_battery_monitor_i_p5306_1ab1560604e6efaed287be9310b8d3ee76" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_battery_monitor_i_p5306_1ab1560604e6efaed287be9310b8d3ee76" kindref="member">SetShortPressBoostSwitchEnable</ref>(uint8_t<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>)<sp/>{</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/>set_bits(<ref refid="_raku__code_8cpp_1a2d89a1896ab0f29a0aa0aee5eabf19d6" kindref="member">IP5306_REG_SYS_1</ref>,<sp/>5,<sp/>1,<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>);</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/>}<sp/><sp/></highlight><highlight class="comment">//*0:disabled,<sp/>1:enabled</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="101"><highlight class="normal"></highlight></codeline>
<codeline lineno="102" refid="class_battery_monitor_i_p5306_1ada48f8e65388377c2851f8e554022f2f" refkind="member"><highlight class="normal"><sp/><sp/>uint8_t<sp/><ref refid="class_battery_monitor_i_p5306_1ada48f8e65388377c2851f8e554022f2f" kindref="member">GetFlashlightClicks</ref>()<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>get_bits(<ref refid="_raku__code_8cpp_1a2d89a1896ab0f29a0aa0aee5eabf19d6" kindref="member">IP5306_REG_SYS_1</ref>,<sp/>6,<sp/>1);<sp/>}</highlight></codeline>
<codeline lineno="103" refid="class_battery_monitor_i_p5306_1aa0c48894ada79d7dd13ba2641c363ada" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_battery_monitor_i_p5306_1aa0c48894ada79d7dd13ba2641c363ada" kindref="member">SetFlashlightClicks</ref>(uint8_t<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>)<sp/>{</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/>set_bits(<ref refid="_raku__code_8cpp_1a2d89a1896ab0f29a0aa0aee5eabf19d6" kindref="member">IP5306_REG_SYS_1</ref>,<sp/>6,<sp/>1,<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>);</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/>}<sp/><sp/></highlight><highlight class="comment">//*0:short<sp/>press<sp/>twice,<sp/>1:long<sp/>press</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="106"><highlight class="normal"></highlight></codeline>
<codeline lineno="107" refid="class_battery_monitor_i_p5306_1a6e0de4defa8b69fa6bf6588f7ad47ffb" refkind="member"><highlight class="normal"><sp/><sp/>uint8_t<sp/><ref refid="class_battery_monitor_i_p5306_1a6e0de4defa8b69fa6bf6588f7ad47ffb" kindref="member">GetBoostOffClicks</ref>()<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>get_bits(<ref refid="_raku__code_8cpp_1a2d89a1896ab0f29a0aa0aee5eabf19d6" kindref="member">IP5306_REG_SYS_1</ref>,<sp/>7,<sp/>1);<sp/>}</highlight></codeline>
<codeline lineno="108" refid="class_battery_monitor_i_p5306_1a192a48940113ec78c5dc7db11ccc7b17" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_battery_monitor_i_p5306_1a192a48940113ec78c5dc7db11ccc7b17" kindref="member">SetBoostOffClicks</ref>(uint8_t<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>)<sp/>{</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/>set_bits(<ref refid="_raku__code_8cpp_1a2d89a1896ab0f29a0aa0aee5eabf19d6" kindref="member">IP5306_REG_SYS_1</ref>,<sp/>7,<sp/>1,<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>);</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/>}<sp/><sp/></highlight><highlight class="comment">//*0:long<sp/>press,<sp/>1:short<sp/>press<sp/>twice</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="111"><highlight class="normal"></highlight></codeline>
<codeline lineno="112" refid="class_battery_monitor_i_p5306_1a45c617ffc00f8bba438b887736c4e03b" refkind="member"><highlight class="normal"><sp/><sp/>uint8_t<sp/><ref refid="class_battery_monitor_i_p5306_1a45c617ffc00f8bba438b887736c4e03b" kindref="member">GetLightLoadShutdownTime</ref>()<sp/>{</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>get_bits(<ref refid="_raku__code_8cpp_1a1dcf9c7fa92ac9f7694fdba445cb2f2e" kindref="member">IP5306_REG_SYS_2</ref>,<sp/>2,<sp/>2);</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="115" refid="class_battery_monitor_i_p5306_1a248b6bfbe78800b20571b953834c0731" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_battery_monitor_i_p5306_1a248b6bfbe78800b20571b953834c0731" kindref="member">SetLightLoadShutdownTime</ref>(uint8_t<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>)<sp/>{</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/>set_bits(<ref refid="_raku__code_8cpp_1a1dcf9c7fa92ac9f7694fdba445cb2f2e" kindref="member">IP5306_REG_SYS_2</ref>,<sp/>2,<sp/>2,<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>);</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/>}<sp/><sp/></highlight><highlight class="comment">//<sp/>0:8s,<sp/>*1:32s,<sp/>2:16s,<sp/>3:64s</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="118"><highlight class="normal"></highlight></codeline>
<codeline lineno="119" refid="class_battery_monitor_i_p5306_1a8f88f1f3bf79fbbb898b28f66f14bfd8" refkind="member"><highlight class="normal"><sp/><sp/>uint8_t<sp/><ref refid="class_battery_monitor_i_p5306_1a8f88f1f3bf79fbbb898b28f66f14bfd8" kindref="member">GetLongPressTime</ref>()<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>get_bits(<ref refid="_raku__code_8cpp_1a1dcf9c7fa92ac9f7694fdba445cb2f2e" kindref="member">IP5306_REG_SYS_2</ref>,<sp/>4,<sp/>1);<sp/>}</highlight></codeline>
<codeline lineno="120" refid="class_battery_monitor_i_p5306_1aaf620b57858560bc6538902a94fe062c" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_battery_monitor_i_p5306_1aaf620b57858560bc6538902a94fe062c" kindref="member">SetLongPressTime</ref>(uint8_t<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>)<sp/>{<sp/>set_bits(<ref refid="_raku__code_8cpp_1a1dcf9c7fa92ac9f7694fdba445cb2f2e" kindref="member">IP5306_REG_SYS_2</ref>,<sp/>4,<sp/>1,<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>);<sp/>}<sp/><sp/></highlight><highlight class="comment">//*0:2s,<sp/>1:3s</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="121"><highlight class="normal"></highlight></codeline>
<codeline lineno="122" refid="class_battery_monitor_i_p5306_1af0b2a429f78b97318f681dfe292913aa" refkind="member"><highlight class="normal"><sp/><sp/>uint8_t<sp/><ref refid="class_battery_monitor_i_p5306_1af0b2a429f78b97318f681dfe292913aa" kindref="member">GetChargingFullStopVoltage</ref>()<sp/>{</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>get_bits(<ref refid="_raku__code_8cpp_1aec16dc8fcc856455557a20afa608f556" kindref="member">IP5306_REG_CHG_0</ref>,<sp/>0,<sp/>2);</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="125" refid="class_battery_monitor_i_p5306_1a4054137d95122944853155fe30f4cfc0" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_battery_monitor_i_p5306_1a4054137d95122944853155fe30f4cfc0" kindref="member">SetChargingFullStopVoltage</ref>(uint8_t<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>)<sp/>{</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/>set_bits(<ref refid="_raku__code_8cpp_1aec16dc8fcc856455557a20afa608f556" kindref="member">IP5306_REG_CHG_0</ref>,<sp/>0,<sp/>2,<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>);</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/>}<sp/><sp/></highlight><highlight class="comment">//<sp/>0:4.14V,<sp/>*1:4.17V,<sp/>2:4.185V,<sp/>3:4.2V<sp/>(values<sp/>are<sp/>for<sp/>charge<sp/>cutoff</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>voltage<sp/>4.2V,<sp/>0<sp/>or<sp/>1<sp/>is<sp/>recommended)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="129"><highlight class="normal"></highlight></codeline>
<codeline lineno="130" refid="class_battery_monitor_i_p5306_1ad20b056000b247c1c34954152c38329c" refkind="member"><highlight class="normal"><sp/><sp/>uint8_t<sp/><ref refid="class_battery_monitor_i_p5306_1ad20b056000b247c1c34954152c38329c" kindref="member">GetChargeUnderVoltageLoop</ref>()<sp/>{</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>get_bits(<ref refid="_raku__code_8cpp_1ac1257d0bb86a45034ff87510273047a8" kindref="member">IP5306_REG_CHG_1</ref>,<sp/>2,<sp/>3);</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/>}<sp/><sp/></highlight><highlight class="comment">//<sp/>Automatically<sp/>adjust<sp/>the<sp/>charging<sp/>current<sp/>when<sp/>the<sp/>voltage<sp/>of</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>VOUT<sp/>is<sp/>greater<sp/>than<sp/>the<sp/>set<sp/>value</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="134" refid="class_battery_monitor_i_p5306_1ac98cf932c29c06c3baeecd8d82bd81f4" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_battery_monitor_i_p5306_1ac98cf932c29c06c3baeecd8d82bd81f4" kindref="member">SetChargeUnderVoltageLoop</ref>(uint8_t<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>)<sp/>{</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/>set_bits(<ref refid="_raku__code_8cpp_1ac1257d0bb86a45034ff87510273047a8" kindref="member">IP5306_REG_CHG_1</ref>,<sp/>2,<sp/>3,<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>);</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/>}<sp/><sp/></highlight><highlight class="comment">//<sp/>Vout=4.45V<sp/>+<sp/>(v<sp/>*<sp/>0.05V)<sp/>(default<sp/>4.55V)<sp/>//When<sp/>charging<sp/>at<sp/>the<sp/>maximum</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>current,<sp/>the<sp/>charge<sp/>is<sp/>less<sp/>than<sp/>the<sp/>set<sp/>value.<sp/>Slowly<sp/>reducing<sp/>the</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>charging<sp/>current<sp/>to<sp/>maintain<sp/>this<sp/>voltage</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="139"><highlight class="normal"></highlight></codeline>
<codeline lineno="140" refid="class_battery_monitor_i_p5306_1aa47f221ba19afd92d43f962e65c0f1ca" refkind="member"><highlight class="normal"><sp/><sp/>uint8_t<sp/><ref refid="class_battery_monitor_i_p5306_1aa47f221ba19afd92d43f962e65c0f1ca" kindref="member">GetEndChargeCurrentDetection</ref>()<sp/>{</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>get_bits(<ref refid="_raku__code_8cpp_1ac1257d0bb86a45034ff87510273047a8" kindref="member">IP5306_REG_CHG_1</ref>,<sp/>6,<sp/>2);</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="143" refid="class_battery_monitor_i_p5306_1a7521aec3dd736021d6d2c60221e8fcd9" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_battery_monitor_i_p5306_1a7521aec3dd736021d6d2c60221e8fcd9" kindref="member">SetEndChargeCurrentDetection</ref>(uint8_t<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>)<sp/>{</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/>set_bits(<ref refid="_raku__code_8cpp_1ac1257d0bb86a45034ff87510273047a8" kindref="member">IP5306_REG_CHG_1</ref>,<sp/>6,<sp/>2,<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>);</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/>}<sp/><sp/></highlight><highlight class="comment">//<sp/>0:200mA,<sp/>1:400mA,<sp/>*2:500mA,<sp/>3:600mA</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="146"><highlight class="normal"></highlight></codeline>
<codeline lineno="147" refid="class_battery_monitor_i_p5306_1a721ffbaad88f2d6c26326c600a3eb514" refkind="member"><highlight class="normal"><sp/><sp/>uint8_t<sp/><ref refid="class_battery_monitor_i_p5306_1a721ffbaad88f2d6c26326c600a3eb514" kindref="member">GetVoltagePressure</ref>()<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>get_bits(<ref refid="_raku__code_8cpp_1a55004a97094593141a67a14631a57798" kindref="member">IP5306_REG_CHG_2</ref>,<sp/>0,<sp/>2);<sp/>}</highlight></codeline>
<codeline lineno="148" refid="class_battery_monitor_i_p5306_1a796f0fee0bb896ec4f5e7ad745e53413" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_battery_monitor_i_p5306_1a796f0fee0bb896ec4f5e7ad745e53413" kindref="member">SetVoltagePressure</ref>(uint8_t<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>)<sp/>{</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/>set_bits(<ref refid="_raku__code_8cpp_1a55004a97094593141a67a14631a57798" kindref="member">IP5306_REG_CHG_2</ref>,<sp/>0,<sp/>2,<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>);</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/>}<sp/><sp/></highlight><highlight class="comment">//<sp/>0:none,<sp/>1:14mV,<sp/>*2:28mV,<sp/>3:42mV<sp/>(28mV<sp/>recommended<sp/>for<sp/>4.2V)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="151"><highlight class="normal"></highlight></codeline>
<codeline lineno="152" refid="class_battery_monitor_i_p5306_1a99b9c7839eb529f657d28d66db747585" refkind="member"><highlight class="normal"><sp/><sp/>uint8_t<sp/><ref refid="class_battery_monitor_i_p5306_1a99b9c7839eb529f657d28d66db747585" kindref="member">GetChargeCutoffVoltage</ref>()<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>get_bits(<ref refid="_raku__code_8cpp_1a55004a97094593141a67a14631a57798" kindref="member">IP5306_REG_CHG_2</ref>,<sp/>2,<sp/>2);<sp/>}</highlight></codeline>
<codeline lineno="153" refid="class_battery_monitor_i_p5306_1ac163647a0244d17a05642a18207aace9" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_battery_monitor_i_p5306_1ac163647a0244d17a05642a18207aace9" kindref="member">SetChargeCutoffVoltage</ref>(uint8_t<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>)<sp/>{</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/>set_bits(<ref refid="_raku__code_8cpp_1a55004a97094593141a67a14631a57798" kindref="member">IP5306_REG_CHG_2</ref>,<sp/>2,<sp/>2,<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>);</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/>}<sp/><sp/></highlight><highlight class="comment">//*0:4.2V,<sp/>1:4.3V,<sp/>2:4.35V,<sp/>3:4.4V</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="156"><highlight class="normal"></highlight></codeline>
<codeline lineno="157" refid="class_battery_monitor_i_p5306_1a2b01125fd4de2b1720ca2846f068a382" refkind="member"><highlight class="normal"><sp/><sp/>uint8_t<sp/><ref refid="class_battery_monitor_i_p5306_1a2b01125fd4de2b1720ca2846f068a382" kindref="member">GetChargeCCLoop</ref>()<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>get_bits(<ref refid="_raku__code_8cpp_1af2e09d465f7474fe892e3a606d0bbc41" kindref="member">IP5306_REG_CHG_3</ref>,<sp/>5,<sp/>1);<sp/>}</highlight></codeline>
<codeline lineno="158" refid="class_battery_monitor_i_p5306_1a20e6cd2e68338ab191a6fedd9d7f725b" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_battery_monitor_i_p5306_1a20e6cd2e68338ab191a6fedd9d7f725b" kindref="member">SetChargeCCLoop</ref>(uint8_t<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>)<sp/>{</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/>set_bits(<ref refid="_raku__code_8cpp_1af2e09d465f7474fe892e3a606d0bbc41" kindref="member">IP5306_REG_CHG_3</ref>,<sp/>5,<sp/>1,<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>);</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/>}<sp/><sp/></highlight><highlight class="comment">//<sp/>0:BAT,<sp/>*1:VIN</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="161"><highlight class="normal"></highlight></codeline>
<codeline lineno="162" refid="class_battery_monitor_i_p5306_1aea3e63b1cdfa33925565b814197cdd5a" refkind="member"><highlight class="normal"><sp/><sp/>uint8_t<sp/><ref refid="class_battery_monitor_i_p5306_1aea3e63b1cdfa33925565b814197cdd5a" kindref="member">GetVinCurrent</ref>()<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>get_bits(<ref refid="_raku__code_8cpp_1abeb4a1461a14c309e0a45646864346b9" kindref="member">IP5306_REG_CHG_4</ref>,<sp/>0,<sp/>5);<sp/>}</highlight></codeline>
<codeline lineno="163" refid="class_battery_monitor_i_p5306_1a9d2992bb24c6e92634114fb889f61ce1" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_battery_monitor_i_p5306_1a9d2992bb24c6e92634114fb889f61ce1" kindref="member">SetVinCurrent</ref>(uint8_t<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>)<sp/>{</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/>set_bits(<ref refid="_raku__code_8cpp_1abeb4a1461a14c309e0a45646864346b9" kindref="member">IP5306_REG_CHG_4</ref>,<sp/>0,<sp/>5,<sp/><ref refid="archive_2bgeigie__firmware__pio_2src_2configuration__server_8cpp_1aed8613cf8a8e4ab677db757821414653" kindref="member">v</ref>);</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/>}<sp/><sp/></highlight><highlight class="comment">//<sp/>ImA=(v*100)+50<sp/>(default<sp/>2250mA)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="166"><highlight class="normal"></highlight></codeline>
<codeline lineno="167" refid="class_battery_monitor_i_p5306_1a27cc4a409326efbfd0c743938d7a1afb" refkind="member"><highlight class="normal"><sp/><sp/>uint8_t<sp/><ref refid="class_battery_monitor_i_p5306_1a27cc4a409326efbfd0c743938d7a1afb" kindref="member">GetShortPressDetected</ref>()<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>get_bits(<ref refid="_raku__code_8cpp_1ab6d1ec81892b43e71c7bc2b552565935" kindref="member">IP5306_REG_READ_3</ref>,<sp/>0,<sp/>1);<sp/>}</highlight></codeline>
<codeline lineno="168" refid="class_battery_monitor_i_p5306_1a0da333f3c366186d180a20312b1481e7" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_battery_monitor_i_p5306_1a0da333f3c366186d180a20312b1481e7" kindref="member">ClearShortPressDetected</ref>()<sp/>{</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>set_bits(<ref refid="_raku__code_8cpp_1ab6d1ec81892b43e71c7bc2b552565935" kindref="member">IP5306_REG_READ_3</ref>,<sp/>0,<sp/>1,<sp/>1);</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="171"><highlight class="normal"></highlight></codeline>
<codeline lineno="172" refid="class_battery_monitor_i_p5306_1a0faa5db1daafb3256381e0b0bf5ca2df" refkind="member"><highlight class="normal"><sp/><sp/>uint8_t<sp/><ref refid="class_battery_monitor_i_p5306_1a0faa5db1daafb3256381e0b0bf5ca2df" kindref="member">GetLongPressDetected</ref>()<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>get_bits(<ref refid="_raku__code_8cpp_1ab6d1ec81892b43e71c7bc2b552565935" kindref="member">IP5306_REG_READ_3</ref>,<sp/>1,<sp/>1);<sp/>}</highlight></codeline>
<codeline lineno="173" refid="class_battery_monitor_i_p5306_1a9300aba905989e6a5dfb9ee927120ee2" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_battery_monitor_i_p5306_1a9300aba905989e6a5dfb9ee927120ee2" kindref="member">ClearLongPressDetected</ref>()<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>set_bits(<ref refid="_raku__code_8cpp_1ab6d1ec81892b43e71c7bc2b552565935" kindref="member">IP5306_REG_READ_3</ref>,<sp/>1,<sp/>1,<sp/>1);<sp/>}</highlight></codeline>
<codeline lineno="174"><highlight class="normal"></highlight></codeline>
<codeline lineno="175" refid="class_battery_monitor_i_p5306_1a90efbdc7a22541ecfe3cb2cfb319365f" refkind="member"><highlight class="normal"><sp/><sp/>uint8_t<sp/><ref refid="class_battery_monitor_i_p5306_1a90efbdc7a22541ecfe3cb2cfb319365f" kindref="member">GetDoubleClickDetected</ref>()<sp/>{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>get_bits(<ref refid="_raku__code_8cpp_1ab6d1ec81892b43e71c7bc2b552565935" kindref="member">IP5306_REG_READ_3</ref>,<sp/>2,<sp/>1);<sp/>}</highlight></codeline>
<codeline lineno="176" refid="class_battery_monitor_i_p5306_1a3dd4a87f6bd529e881d68866ba73fa22" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_battery_monitor_i_p5306_1a3dd4a87f6bd529e881d68866ba73fa22" kindref="member">ClearDoubleClickDetected</ref>()<sp/>{</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>set_bits(<ref refid="_raku__code_8cpp_1ab6d1ec81892b43e71c7bc2b552565935" kindref="member">IP5306_REG_READ_3</ref>,<sp/>2,<sp/>1,<sp/>1);</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="179"><highlight class="normal"></highlight></codeline>
<codeline lineno="180" refid="class_battery_monitor_i_p5306_1a99ad3de534d1057a062e20c9ec8f92cb" refkind="member"><highlight class="normal"><sp/><sp/>uint8_t<sp/><ref refid="class_battery_monitor_i_p5306_1a99ad3de534d1057a062e20c9ec8f92cb" kindref="member">GetPowerSource</ref>()<sp/>{</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>get_bits(<ref refid="_raku__code_8cpp_1abf4d68176448c43972c23895913b317c" kindref="member">IP5306_REG_READ_0</ref>,<sp/>3,<sp/>1);</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/>}<sp/><sp/></highlight><highlight class="comment">//<sp/>0:BAT,<sp/>1:VIN</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="183" refid="class_battery_monitor_i_p5306_1a6413320a32fcfb0719775aa337c623af" refkind="member"><highlight class="normal"><sp/><sp/>uint8_t<sp/><ref refid="class_battery_monitor_i_p5306_1a6413320a32fcfb0719775aa337c623af" kindref="member">GetBatteryFull</ref>()<sp/>{</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>get_bits(<ref refid="_raku__code_8cpp_1a26152fdd6754672e7f3a0732b710c330" kindref="member">IP5306_REG_READ_1</ref>,<sp/>3,<sp/>1);</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/>}<sp/><sp/></highlight><highlight class="comment">//<sp/>0:CHG/DIS,<sp/>1:FULL</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="186" refid="class_battery_monitor_i_p5306_1ae70d8925c7b83e361a74f74eaf85ee07" refkind="member"><highlight class="normal"><sp/><sp/>uint8_t<sp/><ref refid="class_battery_monitor_i_p5306_1ae70d8925c7b83e361a74f74eaf85ee07" kindref="member">GetOutputLoad</ref>()<sp/>{</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>get_bits(<ref refid="_raku__code_8cpp_1a14917c59853385e27422a4db6573c616" kindref="member">IP5306_REG_READ_2</ref>,<sp/>2,<sp/>1);</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/>}<sp/><sp/></highlight><highlight class="comment">//<sp/>0:heavy,<sp/>1:light</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="189" refid="class_battery_monitor_i_p5306_1a67f88c317296c06f2da5b21e125c860a" refkind="member"><highlight class="normal"><sp/><sp/>uint8_t<sp/><ref refid="class_battery_monitor_i_p5306_1a67f88c317296c06f2da5b21e125c860a" kindref="member">GetLevelLeds</ref>()<sp/>{</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>((~get_bits(<ref refid="_raku__code_8cpp_1a1670b51bccc8ee4ba15334afb55b165f" kindref="member">IP5306_REG_READ_4</ref>,<sp/>4,<sp/>4))<sp/>&amp;</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0x0F);<sp/><sp/></highlight><highlight class="comment">//<sp/>LED[0-4]<sp/>State<sp/>(inverted)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="193"><highlight class="normal"></highlight></codeline>
<codeline lineno="194" refid="class_battery_monitor_i_p5306_1a5199ced92607ac2497862ab961413dbd" refkind="member"><highlight class="normal"><sp/><sp/>uint8_t<sp/><ref refid="class_battery_monitor_i_p5306_1a5199ced92607ac2497862ab961413dbd" kindref="member">LEDS2PCT</ref>(uint8_t<sp/></highlight><highlight class="keywordtype">byte</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>((</highlight><highlight class="keywordtype">byte</highlight><highlight class="normal"><sp/>&amp;<sp/>0x01<sp/>?<sp/>25<sp/>:<sp/>0)<sp/>+<sp/>(</highlight><highlight class="keywordtype">byte</highlight><highlight class="normal"><sp/>&amp;<sp/>0x02<sp/>?<sp/>25<sp/>:<sp/>0)<sp/>+</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keywordtype">byte</highlight><highlight class="normal"><sp/>&amp;<sp/>0x04<sp/>?<sp/>25<sp/>:<sp/>0)<sp/>+<sp/>(</highlight><highlight class="keywordtype">byte</highlight><highlight class="normal"><sp/>&amp;<sp/>0x08<sp/>?<sp/>25<sp/>:<sp/>0));</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="198"><highlight class="normal">};</highlight></codeline>
<codeline lineno="199"><highlight class="normal"></highlight></codeline>
<codeline lineno="200"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/><sp/></highlight><highlight class="comment">//<sp/>__BATTERY_HPP__</highlight><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="archive/bgeigie_firmware_pio/src/battery.hpp"/>
  </compounddef>
</doxygen>
